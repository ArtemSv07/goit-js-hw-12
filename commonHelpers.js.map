{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.form');\nconst fragment = document.createDocumentFragment();\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnLoad = document.querySelector('.load-more');\n\nconst BASE_URL = 'https://pixabay.com/api/?';\nconst request = {\n  key: '42159131-e2480a23f0f5c24b1f6f03d93',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 15,\n  page: 1,\n};\n\nlet totalImg = 0;\n\nconst options = {\n  overlayOpacity: 0.8,\n  captionsData: 'alt',\n  captionDelay: 250,\n};\n\nconst lightbox = new SimpleLightbox('.gallery a', options);\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n\n  gallery.innerHTML = '';\n  request.page = 1;\n\n  const input = document.querySelector('input');\n  const inputValue = input.value.trim();\n\n  if (!inputValue) {\n    iziToast.warning({\n      message: 'You forgot to enter your details',\n    });\n  } else {\n    showLoader();\n    request.q = inputValue;\n    const url = BASE_URL + new URLSearchParams(request);\n    getImagesFromAPI(url);\n  }\n  input.value = '';\n});\n\nconst getImagesFromAPI = async (url, scrollHight) => {\n  await axios\n    .get(url)\n    .then(({ data }) => {\n      const arrayImg = data.hits;\n      totalImg = data.totalHits;\n\n      if (arrayImg.length > 0) {\n        render(arrayImg);\n        window.scrollBy({\n          top: scrollHight,\n          behavior: 'smooth',\n        });\n      } else {\n        showLoader();\n        iziToast.warning({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          color: '#f83d04',\n        });\n      }\n    })\n    .catch(error => {\n      iziToast.warning({\n        message: error,\n      });\n    });\n};\n\nfunction render(arrayImg) {\n  arrayImg.forEach(\n    ({\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    }) => {\n      const galleryItem = document.createElement('li');\n      galleryItem.classList.add('gallery-items');\n\n      galleryItem.insertAdjacentHTML(\n        'beforeend',\n        `<a class='gallery-link' href='${largeImageURL}'>\n          <img class='gallery-image' src='${webformatURL}' alt='${tags}' />\n          <ul class='gallery-ul'>\n          <li class='gallery-item'><h3 class='gallery-title'>Likes</h3><p class='gallery-value'>${likes}</p></li>\n          <li class='gallery-item'><h3 class='gallery-title'>Views</h3><p class='gallery-value'>${views}</p></li>\n          <li class='gallery-item'><h3 class='gallery-title'>Comments</h3><p class='gallery-value'>${comments}</p></li>\n          <li class='gallery-item'><h3 class='gallery-title'>Downloads</h3><p class='gallery-value'>${downloads}</p></li>\n        </ul>\n\n        </a>`\n      );\n      fragment.appendChild(galleryItem);\n    }\n  );\n\n  showLoader();\n  btnLoad.classList.remove('hide');\n\n  gallery.appendChild(fragment);\n  lightbox.refresh();\n  totalImgFunction();\n}\n\nbtnLoad.addEventListener('click', () => {\n  request.page += 1;\n  const url = BASE_URL + new URLSearchParams(request);\n\n  showLoader();\n  btnLoad.classList.add('hide');\n\n  const scrollHight =\n    document.querySelector('.gallery-items').getBoundingClientRect().height *\n      2 +\n    26;\n  console.log('Висота дисплея: ' + scrollHight + 'px');\n  getImagesFromAPI(url, scrollHight);\n});\n\nfunction showLoader() {\n  if (loader.classList.contains('hide')) {\n    loader.classList.remove('hide');\n  } else {\n    loader.classList.add('hide');\n    btnLoad.classList.add('hide');\n  }\n}\n\nfunction totalImgFunction() {\n  if (\n    totalImg < request.page * request.per_page &&\n    !btnLoad.classList.contains('hide')\n  ) {\n    btnLoad.classList.add('hide');\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n}\n"],"names":["form","fragment","gallery","loader","btnLoad","BASE_URL","request","totalImg","options","lightbox","SimpleLightbox","event","input","inputValue","iziToast","showLoader","url","getImagesFromAPI","scrollHight","axios","data","arrayImg","render","error","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryItem","totalImgFunction"],"mappings":"owBAMA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAW,SAAS,yBACpBC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,YAAY,EAE7CC,EAAW,4BACXC,EAAU,CACd,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAM,CACR,EAEA,IAAIC,EAAW,EAEf,MAAMC,EAAU,CACd,eAAgB,GAChB,aAAc,MACd,aAAc,GAChB,EAEMC,EAAW,IAAIC,EAAe,aAAcF,CAAO,EAEzDR,EAAK,iBAAiB,SAAUW,GAAS,CACvCA,EAAM,eAAc,EAEpBT,EAAQ,UAAY,GACpBI,EAAQ,KAAO,EAEf,MAAMM,EAAQ,SAAS,cAAc,OAAO,EACtCC,EAAaD,EAAM,MAAM,KAAI,EAEnC,GAAI,CAACC,EACHC,EAAS,QAAQ,CACf,QAAS,kCACf,CAAK,MACI,CACLC,IACAT,EAAQ,EAAIO,EACZ,MAAMG,EAAMX,EAAW,IAAI,gBAAgBC,CAAO,EAClDW,EAAiBD,CAAG,CACrB,CACDJ,EAAM,MAAQ,EAChB,CAAC,EAED,MAAMK,EAAmB,MAAOD,EAAKE,IAAgB,CACnD,MAAMC,EACH,IAAIH,CAAG,EACP,KAAK,CAAC,CAAE,KAAAI,KAAW,CAClB,MAAMC,EAAWD,EAAK,KACtBb,EAAWa,EAAK,UAEZC,EAAS,OAAS,GACpBC,EAAOD,CAAQ,EACf,OAAO,SAAS,CACd,IAAKH,EACL,SAAU,QACpB,CAAS,IAEDH,IACAD,EAAS,QAAQ,CACf,QACE,2EACF,MAAO,SACjB,CAAS,EAET,CAAK,EACA,MAAMS,GAAS,CACdT,EAAS,QAAQ,CACf,QAASS,CACjB,CAAO,CACP,CAAK,CACL,EAEA,SAASD,EAAOD,EAAU,CACxBA,EAAS,QACP,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACN,IAAU,CACJ,MAAMC,EAAc,SAAS,cAAc,IAAI,EAC/CA,EAAY,UAAU,IAAI,eAAe,EAEzCA,EAAY,mBACV,YACA,iCAAiCN,CAAa;AAAA,4CACVD,CAAY,UAAUE,CAAI;AAAA;AAAA,kGAE4BC,CAAK;AAAA,kGACLC,CAAK;AAAA,qGACFC,CAAQ;AAAA,sGACPC,CAAS;AAAA;AAAA;AAAA,aAI/G,EACM7B,EAAS,YAAY8B,CAAW,CACjC,CACL,EAEEhB,IACAX,EAAQ,UAAU,OAAO,MAAM,EAE/BF,EAAQ,YAAYD,CAAQ,EAC5BQ,EAAS,QAAO,EAChBuB,GACF,CAEA5B,EAAQ,iBAAiB,QAAS,IAAM,CACtCE,EAAQ,MAAQ,EAChB,MAAMU,EAAMX,EAAW,IAAI,gBAAgBC,CAAO,EAElDS,IACAX,EAAQ,UAAU,IAAI,MAAM,EAE5B,MAAMc,EACJ,SAAS,cAAc,gBAAgB,EAAE,sBAAuB,EAAC,OAC/D,EACF,GACF,QAAQ,IAAI,mBAAqBA,EAAc,IAAI,EACnDD,EAAiBD,EAAKE,CAAW,CACnC,CAAC,EAED,SAASH,GAAa,CAChBZ,EAAO,UAAU,SAAS,MAAM,EAClCA,EAAO,UAAU,OAAO,MAAM,GAE9BA,EAAO,UAAU,IAAI,MAAM,EAC3BC,EAAQ,UAAU,IAAI,MAAM,EAEhC,CAEA,SAAS4B,GAAmB,CAExBzB,EAAWD,EAAQ,KAAOA,EAAQ,UAClC,CAACF,EAAQ,UAAU,SAAS,MAAM,IAElCA,EAAQ,UAAU,IAAI,MAAM,EAC5BU,EAAS,KAAK,CACZ,QAAS,4DACf,CAAK,EAEL"}